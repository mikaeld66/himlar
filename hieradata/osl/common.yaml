---
location_environment: prod
location_description: Production environment in Oslo

service__address__mysql:             '129.240.224.102'
service__address__rabbitmq:          '129.240.224.102'
service__address__keystone:          '129.240.224.102'
service__address__glance_registry:   '129.240.224.102'
service__address__glance_api:        '129.240.224.102'
service__address__nova_api:          '129.240.224.102'
service__address__nova_api_metadata: '129.240.224.102'
service__address__neutron_server:    '129.240.224.102'
service__address__consoleproxy:      '129.240.224.102'
service__address__cinder_api:        '129.240.224.102'
service__address__etcd_cluster:      'osl-master-01.iaas.uio.no=http://129.240.224.102:2380'

foreman_bootstrap::nameserver: 129.240.2.3

ntp::servers:
  - ntp1.uio.no
  - ntp2.uio.no

profile::network::services::dns_options:
  CNAME:
    default:
      ttl: 3600
      keyfile: "/opt/repo/secrets/nodes/%{hostname}/etc/rndc-%{location}.key"
      server: '129.240.2.6'
  A:
    default:
      ttl: 86400
      keyfile: "/opt/repo/secrets/nodes/%{hostname}/etc/rndc-%{location}.key"
      server: '129.240.2.6'

profile::network::services::dns_records:
  CNAME:
    'puppet.iaas.uio.no':                  'osl-foreman-01.iaas.uio.no'
    'admin.iaas.uio.no':                   'osl-foreman-01.iaas.uio.no'
    'repo.iaas.uio.no':                    'osl-foreman-01.iaas.uio.no'
    'master.iaas.uio.no':                  'osl-master-01.iaas.uio.no'
  A:
    'osl-foreman-01.iaas.uio.no':          '129.240.224.101'
    'osl-master-01.iaas.uio.no':           '129.240.224.102'
    'osl-controller-01.iaas.uio.no':       '129.240.224.107'
    'osl-controller-02.iaas.uio.no':       '129.240.224.108'
    'osl-controller-03.iaas.uio.no':       '129.240.224.109'
    'osl-compute-01.iaas.uio.no':          '129.240.224.110'
    'osl-compute-02.iaas.uio.no':          '129.240.224.111'
    'osl-compute-03.iaas.uio.no':          '129.240.224.112'

bmcremote:
  osl-compute-01:
    ip: 129.240.224.80
    settings:
      set_1:
        order: 01
        check:
          idrac.ipv4.address: 129.240.224.80
        set:
          idrac.ipv4.enable: Enabled
          idrac.ipv4.dhcpenable: Disabled
          idrac.ipv4.address: 1.2.3.4
          idrac.ipv4.gateway: 1.2.3.4
          idrac.ipv4.netmask: 1.2.3.4
          idrac.ipv6.enable: Disabled
        exec:
          {}
      set_2:
        order: 02
        check:
          bios.biosbootsettings.bootmode: Bios
          bios.biosbootsettings.bootseq: NIC.Integrated.1-3-1,HardDisk.List.1-1
        set:
          bios.biosbootsettings.bootmode: Bios
          bios.biosbootsettings.bootseq: NIC.Integrated.1-3-1,HardDisk.List.1-1
        exec:
          - jobqueue create BIOS.Setup.1-1

